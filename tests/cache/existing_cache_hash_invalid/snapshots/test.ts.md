# Snapshot report for `tests/cache/existing_cache_hash_invalid/test.ts`

The actual snapshot is saved in `test.ts.snap`.

Generated by [AVA](https://avajs.dev).

## when step size is 1, it should recreate all cached migrations from the invalid hash point

> Snapshot 1

    [
      'tests/cache/existing_cache_hash_invalid/migrations/.cache/_2022-12-08T19:45:58.674Z_1',
      'tests/cache/existing_cache_hash_invalid/migrations/.cache/2022-12-08T19:45:58.674Z_2022-12-08T19:45:58.685Z_1',
      'tests/cache/existing_cache_hash_invalid/migrations/.cache/2022-12-08T19:45:58.685Z_2022-12-08T19:45:58.691Z_1',
      'tests/cache/existing_cache_hash_invalid/migrations/.cache/2022-12-08T19:45:58.691Z_2022-12-08T19:45:58.699Z_1',
      'tests/cache/existing_cache_hash_invalid/migrations/.cache/2022-12-08T19:45:58.699Z_2022-12-08T19:45:58.706Z_1',
    ]

> Snapshot 2

    [
      'Let([{"var0": Select(["ref"], CreateCollection({"name": "test"}))}, {"var1": Select(["ref"], CreateIndex({"name": "test_index"}))}], Map(["2022-12-08T19:45:58.674Z"], Lambda("migration", Create(Collection("migrations"), {"data": {"migration": Var("migration")}}))))',
      'Let([{"var0": Select(["ref"], CreateRole({"name": "test_role", "privileges": {"resource": Index("test_index"), "actions": {"read": true}}}))}], Map(["2022-12-08T19:45:58.685Z"], Lambda("migration", Create(Collection("migrations"), {"data": {"migration": Var("migration")}}))))',
      'Let([{"var0": Select(["ref"], Delete(Index("test_index")))}, {"var1": Select(["ref"], Update(Role("test_role"), {"privileges": {}, "data": null, "membership": null}))}], Map(["2022-12-08T19:45:58.691Z"], Lambda("migration", Create(Collection("migrations"), {"data": {"migration": Var("migration")}}))))',
      'Let([{"var0": Select(["ref"], CreateIndex({"name": "test_index_1"}))}, {"var1": Select(["ref"], Update(Role("test_role"), {"privileges": {"resource": Var("var0"), "actions": {"read": true}}, "data": null, "membership": null}))}], Map(["2022-12-08T19:45:58.699Z"], Lambda("migration", Create(Collection("migrations"), {"data": {"migration": Var("migration")}}))))',
      'Let([{"var0": Select(["ref"], CreateRole({"name": "test_role_2", "privileges": {"resource": Index("test_index_1"), "actions": {"read": true}}}))}], Map(["2022-12-08T19:45:58.706Z"], Lambda("migration", Create(Collection("migrations"), {"data": {"migration": Var("migration")}}))))',
    ]

> Snapshot 3

    [
      '{"name":"migrations","children":[{"name":"2022-12-08T19_45_58.674Z","children":[{"name":"create-collection-test.fql","hash":"ZrFaSAyoKILO+BgCeC0m9AMus8s="},{"name":"create-index-test_index.fql","hash":"ZSNiGcJTYDZnSmAGqmchkBJIQ3s="}],"hash":"w7GdevE99qCM69My3RgHsDxfDKc="}],"hash":"5w1MNygBiL6hZ3Av1yDKPmIZjOM="}',
      '{"name":"migrations","children":[{"name":"2022-12-08T19_45_58.685Z","children":[{"name":"create-role-test_role.fql","hash":"XpCXjcXUQCSEpprg9OMzpyEpk+c="}],"hash":"ifSFYu5xUtTpVw8zqt7bqxKphYo="}],"hash":"pKQTkm2HQtgEypmHv8VFD070/Wo="}',
      '{"name":"migrations","children":[{"name":"2022-12-08T19_45_58.691Z","children":[{"name":"delete-index-test_index.fql","hash":"a9szR8He9SsWMCqKuR2nU7lGjnU="},{"name":"update-role-test_role.fql","hash":"xS4IMZaniLgCuBhf7tBkX/cY7l8="}],"hash":"VJwnaV5txaH+MPeTbTEm6HlSa0Q="}],"hash":"C0F6W5RJjEEPZGim5nHfo0Kgx4Y="}',
      '{"name":"migrations","children":[{"name":"2022-12-08T19_45_58.699Z","children":[{"name":"create-index-test_index.fql","hash":"mTxEWH7mMKvYAmb+Kc9KEiO0x+U="},{"name":"update-role-test_role.fql","hash":"ly6WNtlZBhCO87hPpgKPUPZZWP0="}],"hash":"CtyDU2/URTgNb67aiYN9njSvYuw="}],"hash":"meAG1KH/ezg/CgMZRRB8CjJkUIA="}',
      '{"name":"migrations","children":[{"name":"2022-12-08T19_45_58.706Z","children":[{"name":"create-role-test_role_2.fql","hash":"bnEPNW0AjRNrpJCypxeDU8joGOc="}],"hash":"RhNZgfUuGNKzxlM5yVTizRTQnYY="}],"hash":"wWwGth49nUjMoVVtcwgys1UYq6E="}',
    ]

## when step size is more than 1, it should create the correct folder and query

> Snapshot 1

    [
      'tests/cache/existing_cache_hash_invalid/migrations/.cache/_2022-12-08T19:45:58.691Z_3',
      'tests/cache/existing_cache_hash_invalid/migrations/.cache/2022-12-08T19:45:58.691Z_2022-12-08T19:45:58.706Z_3',
    ]

> Snapshot 2

    [
      'Let([{"var0": Select(["ref"], CreateRole({"privileges": {}, "data": null, "membership": null, "name": "test_role"}))}, {"var1": Select(["ref"], CreateCollection({"name": "test"}))}], Map(["2022-12-08T19:45:58.674Z", "2022-12-08T19:45:58.685Z", "2022-12-08T19:45:58.691Z"], Lambda("migration", Create(Collection("migrations"), {"data": {"migration": Var("migration")}}))))',
      'Let([{"var0": Select(["ref"], CreateIndex({"name": "test_index_1"}))}, {"var1": Select(["ref"], CreateRole({"name": "test_role_2", "privileges": {"resource": Var("var0"), "actions": {"read": true}}}))}, {"var2": Select(["ref"], Update(Role("test_role"), {"privileges": {"resource": Var("var0"), "actions": {"read": true}}, "data": null, "membership": null}))}], Map(["2022-12-08T19:45:58.699Z", "2022-12-08T19:45:58.706Z"], Lambda("migration", Create(Collection("migrations"), {"data": {"migration": Var("migration")}}))))',
    ]

> Snapshot 3

    [
      '{"name":"migrations","children":[{"name":"2022-12-08T19_45_58.674Z","children":[{"name":"create-collection-test.fql","hash":"ZrFaSAyoKILO+BgCeC0m9AMus8s="},{"name":"create-index-test_index.fql","hash":"ZSNiGcJTYDZnSmAGqmchkBJIQ3s="}],"hash":"w7GdevE99qCM69My3RgHsDxfDKc="},{"name":"2022-12-08T19_45_58.685Z","children":[{"name":"create-role-test_role.fql","hash":"XpCXjcXUQCSEpprg9OMzpyEpk+c="}],"hash":"ifSFYu5xUtTpVw8zqt7bqxKphYo="},{"name":"2022-12-08T19_45_58.691Z","children":[{"name":"delete-index-test_index.fql","hash":"a9szR8He9SsWMCqKuR2nU7lGjnU="},{"name":"update-role-test_role.fql","hash":"xS4IMZaniLgCuBhf7tBkX/cY7l8="}],"hash":"VJwnaV5txaH+MPeTbTEm6HlSa0Q="}],"hash":"S1Sox+qdPMo0s2HgjXR8gWrwKNY="}',
      '{"name":"migrations","children":[{"name":"2022-12-08T19_45_58.699Z","children":[{"name":"create-index-test_index.fql","hash":"mTxEWH7mMKvYAmb+Kc9KEiO0x+U="},{"name":"update-role-test_role.fql","hash":"ly6WNtlZBhCO87hPpgKPUPZZWP0="}],"hash":"CtyDU2/URTgNb67aiYN9njSvYuw="},{"name":"2022-12-08T19_45_58.706Z","children":[{"name":"create-role-test_role_2.fql","hash":"bnEPNW0AjRNrpJCypxeDU8joGOc="}],"hash":"RhNZgfUuGNKzxlM5yVTizRTQnYY="}],"hash":"3v5WS87sjYOfxcWHB8jMWUwquco="}',
    ]
